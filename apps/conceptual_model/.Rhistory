library(here)
library(jsonlite)
# 1 Configuration
# Check if this script is run from within a docker container.
# We do this by checking if an environment variable set by the Dockerfile is
# present or not.
if (Sys.getenv("IN_DOCKER_CONTAINER")=="") {
print("Running from local machine")
# Environment variable IN_DOCKER_CONTAINER is not set. Run from local machine
# This code assumes that forecast_configuration has been opened in
# apps/configuration_dashboard for development
setwd(here())
setwd("apps/conceptual_model")
print(getwd())
if (Sys.getenv("SAPPHIRE_OPDEV_ENV")=="True") {
if (!file.exists("../../../sensitive_data_forecast_tools/config/.env_develop_kghm")) {
stop("File ../../../sensitive_data_forecast_tools/config/.env_develop_kghm not found. ")
}
readRenviron("../../../sensitive_data_forecast_tools/config/.env_develop_kghm")
} else {
# Test if the file .env_develop exists.
if (!file.exists("../config/.env_develop")) {
stop("File ../config/.env_develop not found. ")
}
readRenviron("../config/.env_develop")
}
} else {
print("Running from docker container")
# Environment variable IN_DOCKER_CONTAINER is set. Run from docker container
setwd("/app")
print(getwd())
if (Sys.getenv("SAPPHIRE_OPDEV_ENV")=="True") {
if (!file.exists("../sensitive_data_forecast_tools/config/.env_develop_kghm")) {
stop("File ../sensitive_data_forecast_tools/config/.env_develop_kghm not found. ")
}
readRenviron("../sensitive_data_forecast_tools/config/.env_develop_kghm")
} else {
# Test if the file .env exists.
if (!file.exists("apps/config/.env")) {
stop("File apps/config/.env not found. ")
}
readRenviron("apps/config/.env")
}
}
print(Sys.getenv("ieasyhydroforecast_PATH_TO_BASININFO"))
